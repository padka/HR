name: "Playwright — базовые сценарии"
description: >-
  Набор smoke-тестов для критических пользовательских путей админки. Выполняются
  в headless-режиме и в CI, сохраняют trace и скриншоты.
scenarios:
  - id: E1
    title: "Хедер и переключение темы"
    steps:
      - "login(): авторизоваться (basic auth/фикстура)"
      - "перейти на /"
      - "проверить наличие логотипа и активного пункта навигации"
      - "кликнуть по переключателю темы (data-testid=theme-toggle)"
      - "убедиться, что `document.documentElement` меняет `data-theme`"
      - "выполнить axe-проверку хедера"
  - id: E2
    title: "Фильтры кандидатов"
    steps:
      - "перейти на /candidates"
      - "включить фильтр статуса (например, BOOKED)"
      - "ввести поисковый запрос, убедиться в токенизации (chip)"
      - "проверить обновление таблицы и пагинацию"
      - "сбросить фильтры кнопкой Clear"
  - id: E3
    title: "Модалка ответов кандидата"
    steps:
      - "на /candidates открыть карточку кандидата"
      - "кликнуть кнопку 'Ответы теста' (data-testid=answers-open)"
      - "убедиться, что модалка получает фокус и trap активен"
      - "закрыть по Esc, фокус возвращается на кнопку"
  - id: E4
    title: "Слоты — фильтры и сортировка"
    steps:
      - "перейти на /slots"
      - "открыть sheet фильтров, выбрать город и дату"
      - "подтвердить фильтр, проверить, что таблица отфильтрована"
      - "изменить сортировку по столбцу 'Статус'"
      - "проверить, что строки перестроены"
  - id: E5
    title: "Toast уведомление"
    steps:
      - "имитировать действие (например, обновить слот через API mock)"
      - "вызвать toast (data-testid=toast)"
      - "проверить, что toast исчезает по таймеру и управляется focus-trap"
  - id: E6
    title: "A11y prefers-reduced-motion"
    steps:
      - "установить медиазапрос prefers-reduced-motion: reduce"
      - "перейти на /templates"
      - "проверить, что анимации отключены (класс data-motion='reduced')"
      - "axe-проверка страницы"
  - id: E7
    title: "QA smoke — отчёты"
    steps:
      - "запуск npm run test:e2e"
      - "сохранить trace и video в playwright-report/"
      - "загрузить отчёт в CI"
