<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π ¬∑ TG Bot Admin</title>
  <link rel="icon" href="/static/favicon.ico">
  <script>
    (function () {
      const storageKey = 'tg-admin-theme';
      try {
        const stored = window.localStorage.getItem(storageKey);
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const theme = stored || (prefersDark ? 'dark' : 'light');
        document.documentElement.dataset.theme = theme;
        document.documentElement.style.colorScheme = theme;
      } catch (err) {
        document.documentElement.dataset.theme = 'light';
        document.documentElement.style.colorScheme = 'light';
      }
    })();
  </script>
  <link rel="stylesheet" href="/static/css/tokens.css">
  <link rel="stylesheet" href="/static/build/main.css">
  
  <style>
    .visually-hidden {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0 0 0 0);
      white-space: nowrap;
      border: 0;
    }

    .dock-nav {
      --dock-peek: 18px;
      position: fixed;
      top: 50%;
      left: clamp(12px, 2vw, 20px);
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
      padding: 14px 12px;
      border-radius: 24px;
      border: 1px solid rgba(var(--border-rgb) / 0.32);
      background: linear-gradient(180deg,
        rgb(var(--bg-elev-1) / 0.92),
        rgb(var(--bg-elev-2) / 0.86));
      box-shadow: 0 22px 48px rgba(0, 0, 0, 0.18);
      backdrop-filter: blur(var(--glass-blur-lg)) saturate(1.2);
      z-index: 50;
      transition: transform 220ms var(--transition-snap), opacity 220ms var(--transition-snap), box-shadow 220ms var(--transition-snap);
    }

    .dock-nav[data-dock-hidden="true"] {
      transform: translateY(-50%) translateX(calc(-100% + var(--dock-peek)));
      opacity: 0.85;
    }

    .dock-nav[data-dock-hidden="true"]:hover,
    .dock-nav[data-dock-hidden="true"]:focus-within {
      transform: translateY(-50%) translateX(0);
      opacity: 1;
    }

    .dock-nav__toggle {
      position: absolute;
      top: 50%;
      right: calc(var(--dock-peek) * -1);
      transform: translateY(-50%);
      width: 30px;
      height: 52px;
      border-radius: 999px;
      border: 1px solid rgba(var(--border-rgb) / 0.4);
      background: rgb(var(--bg-elev-1) / 0.92);
      color: inherit;
      cursor: pointer;
      display: grid;
      place-items: center;
      box-shadow: 0 14px 30px rgba(0, 0, 0, 0.18);
      transition: transform 180ms var(--transition-snap), box-shadow 180ms var(--transition-snap);
    }

    .dock-nav__toggle:focus-visible {
      outline: none;
      box-shadow: 0 0 0 3px rgba(var(--accent-soft) / 0.5), 0 12px 24px rgba(0, 0, 0, 0.18);
    }

    .dock-nav__toggle-icon {
      font-size: 16px;
      line-height: 1;
      transition: transform 200ms var(--transition-snap);
    }

    .dock-nav[data-dock-hidden="false"] .dock-nav__toggle-icon {
      transform: rotate(180deg);
    }

    .dock-nav__link {
      width: 52px;
      height: 52px;
      border-radius: 16px;
      display: grid;
      place-items: center;
      position: relative;
      color: var(--color-text);
      text-decoration: none;
      background: linear-gradient(160deg,
        rgb(var(--bg-elev-1) / 0.92),
        rgb(var(--bg-elev-3) / 0.88));
      border: 1px solid rgba(var(--border-rgb) / 0.28);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.12);
      transform-origin: left center;
      transition: transform 180ms var(--transition-snap), box-shadow 180ms var(--transition-snap), border-color 180ms var(--transition-snap);
      z-index: 1;
    }

    .dock-nav__link::after {
      content: attr(data-label);
      position: absolute;
      left: calc(100% + 14px);
      top: 50%;
      transform: translateY(-50%) translateX(-6px);
      padding: 6px 10px;
      border-radius: 999px;
      background: rgb(var(--bg-elev-1) / 0.94);
      border: 1px solid rgba(var(--border-rgb) / 0.3);
      color: var(--color-text);
      font-size: 12px;
      white-space: nowrap;
      opacity: 0;
      pointer-events: none;
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.16);
      transition: opacity 160ms var(--transition-snap), transform 160ms var(--transition-snap);
      z-index: 2;
    }

    .dock-nav__link:hover,
    .dock-nav__link:focus-visible {
      transform: translateX(8px) scale(1.08);
      border-color: rgba(var(--accent-soft) / 0.8);
      box-shadow: 0 18px 32px rgba(0, 0, 0, 0.2);
    }

    .dock-nav__link:hover::after,
    .dock-nav__link:focus-visible::after {
      opacity: 1;
      transform: translateY(-50%) translateX(0);
    }

    .dock-nav__link:active {
      transform: translateX(6px) scale(1.02);
    }

    .dock-nav__link[aria-current="page"] {
      border-color: rgba(var(--accent-soft) / 0.9);
      box-shadow: 0 0 0 1px rgba(var(--accent-soft) / 0.6), 0 14px 26px rgba(0, 0, 0, 0.18);
    }

    .dock-nav__icon {
      font-size: 20px;
      line-height: 1;
      transition: transform 180ms var(--transition-snap), filter 180ms var(--transition-snap);
    }

    .dock-nav__link:hover .dock-nav__icon,
    .dock-nav__link:focus-visible .dock-nav__icon,
    .dock-nav__link[aria-current="page"] .dock-nav__icon {
      transform: scale(1.12);
      filter: drop-shadow(0 10px 16px rgba(0, 0, 0, 0.18));
    }

    .app-main {
      padding-left: clamp(72px, 9vw, 120px);
    }

    @media (max-width: 900px) {
      .dock-nav {
        --dock-peek: 14px;
        left: 8px;
        padding: 12px 10px;
        gap: 10px;
        border-radius: 22px;
      }

      .dock-nav__link {
        width: 46px;
        height: 46px;
        border-radius: 14px;
      }

      .dock-nav__icon {
        font-size: 18px;
      }

      .dock-nav__toggle {
        width: 26px;
        height: 44px;
      }
    }

    @media (max-width: 680px) {
      .dock-nav {
        --dock-peek: 12px;
        left: 6px;
        padding: 10px 8px;
        gap: 8px;
        border-radius: 20px;
      }

      .dock-nav__link {
        width: 42px;
        height: 42px;
        border-radius: 12px;
      }

      .app-main {
        padding-left: clamp(56px, 12vw, 80px);
      }
    }

    @media (max-width: 560px) {
      .app-main {
        padding-left: 0;
      }
    }
  </style>

</head>
<body>
  <div class="app-shell">
    <nav class="dock-nav" data-dock-nav data-dock-hidden="false" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è">
      <button class="dock-nav__toggle" type="button" data-dock-toggle aria-label="–°–∫—Ä—ã—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é" aria-pressed="true">
        <span class="dock-nav__toggle-icon" aria-hidden="true">&gt;</span>
      </button>
      <a href="/" class="dock-nav__link" data-label="–î–∞—à–±–æ—Ä–¥">
        <span class="dock-nav__icon" aria-hidden="true">üìä</span>
        <span class="visually-hidden">–î–∞—à–±–æ—Ä–¥</span>
      </a>
      <a href="/recruiters" class="dock-nav__link" data-label="–†–µ–∫—Ä—É—Ç—ë—Ä—ã">
        <span class="dock-nav__icon" aria-hidden="true">üë•</span>
        <span class="visually-hidden">–†–µ–∫—Ä—É—Ç—ë—Ä—ã</span>
      </a>
      <a href="/cities" class="dock-nav__link" data-label="–ì–æ—Ä–æ–¥–∞">
        <span class="dock-nav__icon" aria-hidden="true">üåÜ</span>
        <span class="visually-hidden">–ì–æ—Ä–æ–¥–∞</span>
      </a>
      <a href="/slots" class="dock-nav__link" data-label="–°–ª–æ—Ç—ã">
        <span class="dock-nav__icon" aria-hidden="true">üìÖ</span>
        <span class="visually-hidden">–°–ª–æ—Ç—ã</span>
      </a>
      <a href="/candidates" class="dock-nav__link" data-label="–ö–∞–Ω–¥–∏–¥–∞—Ç—ã">
        <span class="dock-nav__icon" aria-hidden="true">üë§</span>
        <span class="visually-hidden">–ö–∞–Ω–¥–∏–¥–∞—Ç—ã</span>
      </a>
      <a href="/templates" class="dock-nav__link" data-label="–®–∞–±–ª–æ–Ω—ã" aria-current="page">
        <span class="dock-nav__icon" aria-hidden="true">üí¨</span>
        <span class="visually-hidden">–®–∞–±–ª–æ–Ω—ã</span>
      </a>
      <a href="/questions" class="dock-nav__link" data-label="–í–æ–ø—Ä–æ—Å—ã">
        <span class="dock-nav__icon" aria-hidden="true">‚ùì</span>
        <span class="visually-hidden">–í–æ–ø—Ä–æ—Å—ã</span>
      </a>
    </nav>
    <main class="app-main">
      <div class="container">
        
<section class="page">
  <header class="page-header">
    <div>
      <h1 class="page-title">–®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π</h1>
      <p class="page-description">
        –£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Ç–µ–∫—Å—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–∞–Ω–¥–∏–¥–∞—Ç—É –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ –ø—Ä–æ—Ü–µ—Å—Å–∞. –õ—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
        —Å—Ä–∞–∑—É —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –±–æ—Ç—É –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞—Å—Å—ã–ª–∫–µ.
      </p>
    </div>
    <div class="page-actions">
      <a class="btn btn-primary" href="/templates/new">–ù–æ–≤—ã–π —à–∞–±–ª–æ–Ω</a>
    </div>
  </header>

  <div class="card glass grain">
    <h2 class="section-title">–≠—Ç–∞–ø—ã –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏</h2>
    <p class="section-subtitle">–ö–ª—é—á–µ–≤—ã–µ —à–∞–≥–∏, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –∫–∞–Ω–¥–∏–¥–∞—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –±–æ—Ç–æ–º.</p>
    <ol class="stage-flow muted">
      <li><strong>–®–∞–≥ 1.</strong> –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤—ã–±—Ä–∞—Ç—å –≤—Ä–µ–º—è –¥–ª—è –≤–∏–¥–µ–æ–∏–Ω—Ç–µ—Ä–≤—å—é.</li>
      <li><strong>–®–∞–≥ 2.</strong> –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∑–∞ 2 —á–∞—Å–∞ –¥–æ –∏–Ω—Ç–µ—Ä–≤—å—é —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º.</li>
      <li><strong>–®–∞–≥ 3.</strong> –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –Ω–∞ –æ–∑–Ω–∞–∫–æ–º–∏—Ç–µ–ª—å–Ω—ã–π –¥–µ–Ω—å –ø–æ—Å–ª–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã.</li>
      <li><strong>–®–∞–≥ 4.</strong> –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —è–≤–∫–∏ –∑–∞ 2 —á–∞—Å–∞ –¥–æ –æ–∑–Ω–∞–∫–æ–º–∏—Ç–µ–ª—å–Ω–æ–≥–æ –¥–Ω—è.</li>
    </ol>
    <div class="badge info-badge">
      
      –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: <code>{{candidate_fio}}</code>, <code>{{city_name}}</code>, <code>{{interview_dt_hint}}</code>,
      <code>{{slot_date_local}}</code>, <code>{{slot_time_local}}</code>, <code>{{slot_datetime_local}}</code>,
      <code>{{recruiter_name}}</code>, <code>{{address}}</code>.
      
    </div>
  </div>

  <nav class="template-tabs" role="tablist" aria-label="–¢–∏–ø—ã —à–∞–±–ª–æ–Ω–æ–≤">
    <button type="button" class="template-tab is-active" data-tab-target="global">–ì–ª–æ–±–∞–ª—å–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã</button>
    <button type="button" class="template-tab" data-tab-target="cities">–®–∞–±–ª–æ–Ω—ã –≥–æ—Ä–æ–¥–æ–≤</button>
  </nav>

  <section class="card glass grain template-panel is-active" data-panel="global">
    <header class="template-panel__header">
      <div>
        <h3 class="card-title">–ì–ª–æ–±–∞–ª—å–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã</h3>
        <p class="page-description">–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, –µ—Å–ª–∏ –¥–ª—è –≥–æ—Ä–æ–¥–∞ –Ω–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞.</p>
      </div>
    </header>
    <div class="list-table-wrapper">
      <table class="list-table template-table" data-template-table="global">
        <thead>
          <tr>
            <th scope="col">–≠—Ç–∞–ø</th>
            <th scope="col" class="is-optional">–û–ø–∏—Å–∞–Ω–∏–µ</th>
            <th scope="col">–¢–µ–∫—Å—Ç</th>
            <th scope="col" class="col-align-end">–î–µ–π—Å—Ç–≤–∏—è</th>
          </tr>
        </thead>
        <tbody>
          
            
            <tr
              class="template-row is-custom"
              data-template-row
              data-stage="invite"
              data-stage-title="–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ"
              data-city=""
              data-default="–î–æ–±—Ä—ã–π –¥–µ–Ω—å! –í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è –∏–Ω—Ç–µ—Ä–≤—å—é –ø–æ —Å—Å—ã–ª–∫–µ..."
              data-current="–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –í—ã–±–µ—Ä–∏—Ç–µ —É–¥–æ–±–Ω—ã–π —Å–ª–æ—Ç –ø–æ —Å—Å—ã–ª–∫–µ {{slot_datetime_local}}."
            >
              <td data-label="–≠—Ç–∞–ø">
                <div class="template-stage">
                  <strong>–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ</strong>
                  <span class="template-stage__key"><code class="text-mono">invite</code></span>
                </div>
              </td>
              <td data-label="–û–ø–∏—Å–∞–Ω–∏–µ" class="template-description is-optional">–ü—Ä–µ–¥–ª–∞–≥–∞–µ–º –≤—ã–±—Ä–∞—Ç—å —Å–ª–æ—Ç –¥–ª—è –∏–Ω—Ç–µ—Ä–≤—å—é.</td>
              <td data-label="–¢–µ–∫—Å—Ç" class="template-cell">
                <div class="template-preview" data-role="preview">–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –í—ã–±–µ—Ä–∏—Ç–µ —É–¥–æ–±–Ω—ã–π —Å–ª–æ—Ç –ø–æ —Å—Å—ã–ª–∫–µ {{slot_datetime_local}}.</div>
                <div class="template-status-line">
                  <span class="badge template-status template-status--custom" data-role="status">
                    –°–≤–æ–π —Ç–µ–∫—Å—Ç
                  </span>
                  <span class="badge muted template-save-indicator" data-role="save-indicator" hidden>–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ</span>
                </div>
                <textarea
                  class="template-editor"
                  data-role="editor"
                  data-default="–î–æ–±—Ä—ã–π –¥–µ–Ω—å! –í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è –∏–Ω—Ç–µ—Ä–≤—å—é –ø–æ —Å—Å—ã–ª–∫–µ..."
                  rows="6"
                  hidden
                >–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –í—ã–±–µ—Ä–∏—Ç–µ —É–¥–æ–±–Ω—ã–π —Å–ª–æ—Ç –ø–æ —Å—Å—ã–ª–∫–µ {{slot_datetime_local}}.</textarea>
              </td>
              <td data-label="–î–µ–π—Å—Ç–≤–∏—è" class="col-align-end">
                <div class="template-actions" data-role="view-actions">
                  <button type="button" class="btn btn-soft btn-sm" data-action="edit">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                  <button type="button" class="btn btn-ghost btn-sm template-action--danger" data-action="clear">–£–¥–∞–ª–∏—Ç—å</button>
                </div>
                <div class="template-actions" data-role="edit-actions" hidden>
                  <button type="button" class="btn btn-primary btn-sm" data-action="save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                  <button type="button" class="btn btn-soft btn-sm" data-action="cancel">–û—Ç–º–µ–Ω–∞</button>
                </div>
              </td>
            </tr>
          
            
            <tr
              class="template-row"
              data-template-row
              data-stage="reminder"
              data-stage-title="–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ"
              data-city=""
              data-default="–ù–∞–ø–æ–º–∏–Ω–∞–µ–º –ø—Ä–æ –∏–Ω—Ç–µ—Ä–≤—å—é —Å–µ–≥–æ–¥–Ω—è –≤ {{slot_time_local}}."
              data-current="None"
            >
              <td data-label="–≠—Ç–∞–ø">
                <div class="template-stage">
                  <strong>–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ</strong>
                  <span class="template-stage__key"><code class="text-mono">reminder</code></span>
                </div>
              </td>
              <td data-label="–û–ø–∏—Å–∞–Ω–∏–µ" class="template-description is-optional">–°–æ–æ–±—â–µ–Ω–∏–µ –∑–∞ 2 —á–∞—Å–∞ –¥–æ –≤—Å—Ç—Ä–µ—á–∏.</td>
              <td data-label="–¢–µ–∫—Å—Ç" class="template-cell">
                <div class="template-preview" data-role="preview">–ù–∞–ø–æ–º–∏–Ω–∞–µ–º –ø—Ä–æ –∏–Ω—Ç–µ—Ä–≤—å—é —Å–µ–≥–æ–¥–Ω—è –≤ {{slot_time_local}}.</div>
                <div class="template-status-line">
                  <span class="badge template-status" data-role="status">
                    –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
                  </span>
                  <span class="badge muted template-save-indicator" data-role="save-indicator" hidden>–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ</span>
                </div>
                <textarea
                  class="template-editor"
                  data-role="editor"
                  data-default="–ù–∞–ø–æ–º–∏–Ω–∞–µ–º –ø—Ä–æ –∏–Ω—Ç–µ—Ä–≤—å—é —Å–µ–≥–æ–¥–Ω—è –≤ {{slot_time_local}}."
                  rows="6"
                  hidden
                ></textarea>
              </td>
              <td data-label="–î–µ–π—Å—Ç–≤–∏—è" class="col-align-end">
                <div class="template-actions" data-role="view-actions">
                  <button type="button" class="btn btn-soft btn-sm" data-action="edit">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                  <button type="button" class="btn btn-ghost btn-sm template-action--danger" data-action="clear">–£–¥–∞–ª–∏—Ç—å</button>
                </div>
                <div class="template-actions" data-role="edit-actions" hidden>
                  <button type="button" class="btn btn-primary btn-sm" data-action="save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                  <button type="button" class="btn btn-soft btn-sm" data-action="cancel">–û—Ç–º–µ–Ω–∞</button>
                </div>
              </td>
            </tr>
          
            
            <tr
              class="template-row"
              data-template-row
              data-stage="followup"
              data-stage-title="–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ"
              data-city=""
              data-default="–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É—á–∞—Å—Ç–∏–µ, –æ—Ç–≤–µ—Ç–∏–≤ –Ω–∞ —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ."
              data-current="None"
            >
              <td data-label="–≠—Ç–∞–ø">
                <div class="template-stage">
                  <strong>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</strong>
                  <span class="template-stage__key"><code class="text-mono">followup</code></span>
                </div>
              </td>
              <td data-label="–û–ø–∏—Å–∞–Ω–∏–µ" class="template-description is-optional">–ü—Ä–æ—Å–∏–º –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —É—á–∞—Å—Ç–∏–µ.</td>
              <td data-label="–¢–µ–∫—Å—Ç" class="template-cell">
                <div class="template-preview" data-role="preview">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É—á–∞—Å—Ç–∏–µ, –æ—Ç–≤–µ—Ç–∏–≤ –Ω–∞ —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ.</div>
                <div class="template-status-line">
                  <span class="badge template-status" data-role="status">
                    –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
                  </span>
                  <span class="badge muted template-save-indicator" data-role="save-indicator" hidden>–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ</span>
                </div>
                <textarea
                  class="template-editor"
                  data-role="editor"
                  data-default="–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É—á–∞—Å—Ç–∏–µ, –æ—Ç–≤–µ—Ç–∏–≤ –Ω–∞ —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ."
                  rows="6"
                  hidden
                ></textarea>
              </td>
              <td data-label="–î–µ–π—Å—Ç–≤–∏—è" class="col-align-end">
                <div class="template-actions" data-role="view-actions">
                  <button type="button" class="btn btn-soft btn-sm" data-action="edit">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                  <button type="button" class="btn btn-ghost btn-sm template-action--danger" data-action="clear">–£–¥–∞–ª–∏—Ç—å</button>
                </div>
                <div class="template-actions" data-role="edit-actions" hidden>
                  <button type="button" class="btn btn-primary btn-sm" data-action="save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                  <button type="button" class="btn btn-soft btn-sm" data-action="cancel">–û—Ç–º–µ–Ω–∞</button>
                </div>
              </td>
            </tr>
          
            
            <tr
              class="template-row is-custom"
              data-template-row
              data-stage="welcome_day"
              data-stage-title="–û–∑–Ω–∞–∫–æ–º–∏—Ç–µ–ª—å–Ω—ã–π –¥–µ–Ω—å"
              data-city=""
              data-default="–ú—ã –∂–¥—ë–º –≤–∞—Å –Ω–∞ –æ–∑–Ω–∞–∫–æ–º–∏—Ç–µ–ª—å–Ω—ã–π –¥–µ–Ω—å {{slot_date_local}}."
              data-current="–°–ø–∞—Å–∏–±–æ –∑–∞ –∏–Ω—Ç–µ—Ä–≤—å—é! –ñ–¥—ë–º –≤–∞—Å {{slot_date_local}} –ø–æ –∞–¥—Ä–µ—Å—É {{address}}."
            >
              <td data-label="–≠—Ç–∞–ø">
                <div class="template-stage">
                  <strong>–û–∑–Ω–∞–∫–æ–º–∏—Ç–µ–ª—å–Ω—ã–π –¥–µ–Ω—å</strong>
                  <span class="template-stage__key"><code class="text-mono">welcome_day</code></span>
                </div>
              </td>
              <td data-label="–û–ø–∏—Å–∞–Ω–∏–µ" class="template-description is-optional">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä–≤—å—é.</td>
              <td data-label="–¢–µ–∫—Å—Ç" class="template-cell">
                <div class="template-preview" data-role="preview">–°–ø–∞—Å–∏–±–æ –∑–∞ –∏–Ω—Ç–µ—Ä–≤—å—é! –ñ–¥—ë–º –≤–∞—Å {{slot_date_local}} –ø–æ –∞–¥—Ä–µ—Å—É {{address}}.</div>
                <div class="template-status-line">
                  <span class="badge template-status template-status--custom" data-role="status">
                    –°–≤–æ–π —Ç–µ–∫—Å—Ç
                  </span>
                  <span class="badge muted template-save-indicator" data-role="save-indicator" hidden>–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ</span>
                </div>
                <textarea
                  class="template-editor"
                  data-role="editor"
                  data-default="–ú—ã –∂–¥—ë–º –≤–∞—Å –Ω–∞ –æ–∑–Ω–∞–∫–æ–º–∏—Ç–µ–ª—å–Ω—ã–π –¥–µ–Ω—å {{slot_date_local}}."
                  rows="6"
                  hidden
                >–°–ø–∞—Å–∏–±–æ –∑–∞ –∏–Ω—Ç–µ—Ä–≤—å—é! –ñ–¥—ë–º –≤–∞—Å {{slot_date_local}} –ø–æ –∞–¥—Ä–µ—Å—É {{address}}.</textarea>
              </td>
              <td data-label="–î–µ–π—Å—Ç–≤–∏—è" class="col-align-end">
                <div class="template-actions" data-role="view-actions">
                  <button type="button" class="btn btn-soft btn-sm" data-action="edit">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                  <button type="button" class="btn btn-ghost btn-sm template-action--danger" data-action="clear">–£–¥–∞–ª–∏—Ç—å</button>
                </div>
                <div class="template-actions" data-role="edit-actions" hidden>
                  <button type="button" class="btn btn-primary btn-sm" data-action="save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                  <button type="button" class="btn btn-soft btn-sm" data-action="cancel">–û—Ç–º–µ–Ω–∞</button>
                </div>
              </td>
            </tr>
          
        </tbody>
      </table>
    </div>
    <footer class="template-hint muted">–£–¥–∞–ª–µ–Ω–∏–µ –æ—á–∏—â–∞–µ—Ç —Ç–µ–∫—Å—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —à–∞–±–ª–æ–Ω.</footer>
  </section>

  <section class="card glass grain template-panel" data-panel="cities">
    <header class="template-panel__header">
      <div>
        <h3 class="card-title">–®–∞–±–ª–æ–Ω—ã –ø–æ –≥–æ—Ä–æ–¥–∞–º</h3>
        <p class="page-description">–õ–æ–∫–∞–ª—å–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã.</p>
      </div>
      
        <div class="template-filters">
          <label class="form-field form-field--wide">
            <span>–ì–æ—Ä–æ–¥</span>
            <select id="city-filter" class="template-filter">
              <option value="">–í—Å–µ –≥–æ—Ä–æ–¥–∞</option>
              
                <option value="1">–ú–æ—Å–∫–≤–∞</option>
              
            </select>
          </label>
        </div>
      
    </header>
    
      <div class="list-table-wrapper">
        <table class="list-table template-table" data-template-table="cities">
          <thead>
            <tr>
              <th scope="col">–ì–æ—Ä–æ–¥</th>
              <th scope="col">–≠—Ç–∞–ø</th>
              <th scope="col">–¢–µ–∫—Å—Ç</th>
              <th scope="col" class="col-align-end">–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
          </thead>
          <tbody>
            
              
                
                <tr
                  class="template-row is-custom"
                  data-template-row
                  data-city="1"
                  data-city-name="–ú–æ—Å–∫–≤–∞"
                  data-stage="invite"
                  data-stage-title="–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ"
                  data-default="–î–æ–±—Ä—ã–π –¥–µ–Ω—å! –í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è –∏–Ω—Ç–µ—Ä–≤—å—é –ø–æ —Å—Å—ã–ª–∫–µ..."
                  data-current="–ú–æ—Å–∫–æ–≤—Å–∫–∞—è –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–∏–≥–ª–∞—à–∞–µ—Ç –≤–∞—Å –Ω–∞ –∏–Ω—Ç–µ—Ä–≤—å—é {{slot_datetime_local}}."
                >
                  <td data-label="–ì–æ—Ä–æ–¥">
                    <div class="template-city">
                      <strong>–ú–æ—Å–∫–≤–∞</strong>
                      <span class="badge" title="–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å">Europe/Moscow</span>
                    </div>
                  </td>
                  <td data-label="–≠—Ç–∞–ø">
                    <div class="template-stage">
                      <strong>–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ</strong>
                      <span class="template-stage__key"><code class="text-mono">invite</code></span>
                    </div>
                  </td>
                  <td data-label="–¢–µ–∫—Å—Ç" class="template-cell">
                    <div class="template-preview" data-role="preview">–ú–æ—Å–∫–æ–≤—Å–∫–∞—è –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–∏–≥–ª–∞—à–∞–µ—Ç –≤–∞—Å –Ω–∞ –∏–Ω—Ç–µ—Ä–≤—å—é {{slot_datetime_local}}.</div>
                    <div class="template-status-line">
                      <span class="badge template-status template-status--custom" data-role="status">
                        –°–≤–æ–π —Ç–µ–∫—Å—Ç
                      </span>
                      <span class="badge muted template-save-indicator" data-role="save-indicator" hidden>–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ</span>
                    </div>
                    <textarea
                      class="template-editor"
                      data-role="editor"
                      data-default="–î–æ–±—Ä—ã–π –¥–µ–Ω—å! –í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è –∏–Ω—Ç–µ—Ä–≤—å—é –ø–æ —Å—Å—ã–ª–∫–µ..."
                      rows="6"
                      hidden
                    >–ú–æ—Å–∫–æ–≤—Å–∫–∞—è –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–∏–≥–ª–∞—à–∞–µ—Ç –≤–∞—Å –Ω–∞ –∏–Ω—Ç–µ—Ä–≤—å—é {{slot_datetime_local}}.</textarea>
                  </td>
                  <td data-label="–î–µ–π—Å—Ç–≤–∏—è" class="col-align-end">
                    <div class="template-actions" data-role="view-actions">
                      <button type="button" class="btn btn-soft btn-sm" data-action="edit">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                      <button type="button" class="btn btn-ghost btn-sm template-action--danger" data-action="clear">–£–¥–∞–ª–∏—Ç—å</button>
                    </div>
                    <div class="template-actions" data-role="edit-actions" hidden>
                      <button type="button" class="btn btn-primary btn-sm" data-action="save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                      <button type="button" class="btn btn-soft btn-sm" data-action="cancel">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                  </td>
                </tr>
              
                
                <tr
                  class="template-row"
                  data-template-row
                  data-city="1"
                  data-city-name="–ú–æ—Å–∫–≤–∞"
                  data-stage="reminder"
                  data-stage-title="–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ"
                  data-default="–ù–∞–ø–æ–º–∏–Ω–∞–µ–º –ø—Ä–æ –∏–Ω—Ç–µ—Ä–≤—å—é —Å–µ–≥–æ–¥–Ω—è –≤ {{slot_time_local}}."
                  data-current="None"
                >
                  <td data-label="–ì–æ—Ä–æ–¥">
                    <div class="template-city">
                      <strong>–ú–æ—Å–∫–≤–∞</strong>
                      <span class="badge" title="–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å">Europe/Moscow</span>
                    </div>
                  </td>
                  <td data-label="–≠—Ç–∞–ø">
                    <div class="template-stage">
                      <strong>–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ</strong>
                      <span class="template-stage__key"><code class="text-mono">reminder</code></span>
                    </div>
                  </td>
                  <td data-label="–¢–µ–∫—Å—Ç" class="template-cell">
                    <div class="template-preview" data-role="preview">–ù–∞–ø–æ–º–∏–Ω–∞–µ–º –ø—Ä–æ –∏–Ω—Ç–µ—Ä–≤—å—é —Å–µ–≥–æ–¥–Ω—è –≤ {{slot_time_local}}.</div>
                    <div class="template-status-line">
                      <span class="badge template-status" data-role="status">
                        –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
                      </span>
                      <span class="badge muted template-save-indicator" data-role="save-indicator" hidden>–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ</span>
                    </div>
                    <textarea
                      class="template-editor"
                      data-role="editor"
                      data-default="–ù–∞–ø–æ–º–∏–Ω–∞–µ–º –ø—Ä–æ –∏–Ω—Ç–µ—Ä–≤—å—é —Å–µ–≥–æ–¥–Ω—è –≤ {{slot_time_local}}."
                      rows="6"
                      hidden
                    ></textarea>
                  </td>
                  <td data-label="–î–µ–π—Å—Ç–≤–∏—è" class="col-align-end">
                    <div class="template-actions" data-role="view-actions">
                      <button type="button" class="btn btn-soft btn-sm" data-action="edit">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                      <button type="button" class="btn btn-ghost btn-sm template-action--danger" data-action="clear">–£–¥–∞–ª–∏—Ç—å</button>
                    </div>
                    <div class="template-actions" data-role="edit-actions" hidden>
                      <button type="button" class="btn btn-primary btn-sm" data-action="save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                      <button type="button" class="btn btn-soft btn-sm" data-action="cancel">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                  </td>
                </tr>
              
            
          </tbody>
        </table>
      </div>
      <div class="alert mt-sm" data-role="city-empty" hidden>–î–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –Ω–µ—Ç —à–∞–±–ª–æ–Ω–æ–≤.</div>
      <footer class="template-hint muted">–£–¥–∞–ª–µ–Ω–∏–µ –æ—á–∏—â–∞–µ—Ç —Ç–µ–∫—Å—Ç –∏ –≤–∫–ª—é—á–∞–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–π —à–∞–±–ª–æ–Ω.</footer>
    
  </section>

  <section class="card glass grain template-table-card">
    <h2 class="section-title">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã</h2>
    <p class="section-subtitle">–°–≤–æ–±–æ–¥–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è—Ö –∏ —Ä—É—á–Ω—ã—Ö —Ä–∞—Å—Å—ã–ª–∫–∞—Ö.</p>

    
      <div class="alert mt-sm">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –≤ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è—Ö.</div>
    
  </section>
</section>

<script>
(function () {
  const tabButtons = Array.from(document.querySelectorAll('[data-tab-target]'));
  const panels = Array.from(document.querySelectorAll('[data-panel]'));
  const rows = Array.from(document.querySelectorAll('[data-template-row]'));
  const cityFilter = document.getElementById('city-filter');
  const cityEmptyState = document.querySelector('[data-role="city-empty"]');

  function activateTab(target) {
    tabButtons.forEach((btn) => {
      const isActive = btn.dataset.tabTarget === target;
      btn.classList.toggle('is-active', isActive);
      btn.setAttribute('aria-selected', String(isActive));
    });
    panels.forEach((panel) => {
      panel.classList.toggle('is-active', panel.dataset.panel === target);
    });
  }

  tabButtons.forEach((btn) => {
    btn.addEventListener('click', () => activateTab(btn.dataset.tabTarget));
  });

  function updateRowPreview(row, value) {
    const preview = row.querySelector('[data-role="preview"]');
    const status = row.querySelector('[data-role="status"]');
    const indicator = row.querySelector('[data-role="save-indicator"]');
    const defaultText = row.dataset.default || '';
    const trimmed = value.trim();
    const hasCustom = Boolean(trimmed);
    const text = hasCustom ? trimmed : (defaultText || '');
    row.dataset.current = value;
    row.classList.toggle('is-custom', hasCustom);
    if (preview) {
      preview.textContent = text || '‚Äî';
    }
    if (status) {
      status.textContent = hasCustom ? '–°–≤–æ–π —Ç–µ–∫—Å—Ç' : '–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é';
      status.classList.toggle('template-status--custom', hasCustom);
    }
    if (indicator) {
      indicator.hidden = true;
      indicator.classList.remove('is-ok', 'is-error');
    }
  }

  function setEditing(row, editing) {
    const editor = row.querySelector('[data-role="editor"]');
    const viewActions = row.querySelector('[data-role="view-actions"]');
    const editActions = row.querySelector('[data-role="edit-actions"]');
    row.classList.toggle('is-editing', editing);
    if (editor) {
      editor.hidden = !editing;
      if (editing) {
        editor.focus();
        editor.setSelectionRange(editor.value.length, editor.value.length);
      }
    }
    if (viewActions) viewActions.hidden = editing;
    if (editActions) editActions.hidden = !editing;
  }

  function setLoading(row, loading) {
    row.classList.toggle('is-loading', loading);
    row.querySelectorAll('button').forEach((btn) => {
      btn.disabled = loading;
    });
  }

  async function persistRow(row, nextValue) {
    const key = row.dataset.stage;
    if (!key) return false;
    const cityId = row.dataset.city;
    const indicator = row.querySelector('[data-role="save-indicator"]');
    const payload = {
      city_id: cityId ? cityId : null,
      templates: { [key]: nextValue.trim() },
    };

    if (indicator) {
      indicator.hidden = false;
      indicator.textContent = '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ‚Ä¶';
      indicator.classList.remove('is-ok', 'is-error');
    }

    setLoading(row, true);
    try {
      const response = await fetch('/templates/save', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload),
      });
      const data = await response.json().catch(() => ({}));
      if (!response.ok || !data || data.ok !== true) {
        throw new Error(data && data.error ? data.error : '–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è');
      }
      if (indicator) {
        indicator.textContent = '–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ';
        indicator.classList.add('is-ok');
        window.setTimeout(() => {
          indicator.hidden = true;
          indicator.classList.remove('is-ok');
        }, 1400);
      }
      updateRowPreview(row, nextValue);
      setEditing(row, false);
      return true;
    } catch (err) {
      if (indicator) {
        indicator.textContent = '–û—à–∏–±–∫–∞';
        indicator.classList.add('is-error');
      }
      console.error(err);
      return false;
    } finally {
      setLoading(row, false);
    }
  }

  function handleAction(event) {
    const actionEl = event.target.closest('[data-action]');
    if (!actionEl) return;
    const row = actionEl.closest('[data-template-row]');
    if (!row) return;

    const editor = row.querySelector('[data-role="editor"]');
    const action = actionEl.dataset.action;
    if (action === 'edit') {
      if (editor) editor.value = row.dataset.current || '';
      setEditing(row, true);
      return;
    }
    if (action === 'cancel') {
      if (editor) editor.value = row.dataset.current || '';
      setEditing(row, false);
      return;
    }
    if (action === 'save') {
      if (!editor) return;
      const value = editor.value || '';
      void persistRow(row, value);
      return;
    }
    if (action === 'clear') {
      const stageTitle = row.dataset.stageTitle || '—à–∞–≥';
      const cityName = row.dataset.cityName;
      const message = cityName
        ? `–£–¥–∞–ª–∏—Ç—å —Ç–µ–∫—Å—Ç –¥–ª—è –≥–æ—Ä–æ–¥–∞ ¬´${cityName}¬ª (${stageTitle}) –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π —à–∞–±–ª–æ–Ω?`
        : `–£–¥–∞–ª–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è ¬´${stageTitle}¬ª –∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É —à–∞–±–ª–æ–Ω—É?`;
      if (!window.confirm(message)) {
        return;
      }
      if (editor) editor.value = '';
      void persistRow(row, '');
    }
  }

  document.addEventListener('click', handleAction);

  function applyCityFilter() {
    if (!cityFilter) return;
    const value = cityFilter.value;
    const table = document.querySelector('[data-template-table="cities"]');
    if (!table) return;
    const tableRows = Array.from(table.querySelectorAll('[data-template-row]'));
    let visibleCount = 0;
    tableRows.forEach((row) => {
      const matches = !value || row.dataset.city === value;
      row.hidden = !matches;
      if (matches) visibleCount += 1;
    });
    if (cityEmptyState) {
      cityEmptyState.hidden = visibleCount !== 0;
    }
  }

  if (cityFilter) {
    cityFilter.addEventListener('change', applyCityFilter);
  }

  rows.forEach((row) => {
    updateRowPreview(row, row.dataset.current || '');
  });

  applyCityFilter();
})();
</script>

      </div>
    </main>
  </div>
  <script>
    (function () {
      const storageKey = 'tg-admin-theme';
      const docEl = document.documentElement;
      const toggle = document.getElementById('theme-toggle');
      const dock = document.querySelector('[data-dock-nav]');
      const dockToggle = document.querySelector('[data-dock-toggle]');
      const dockMedia = window.matchMedia('(max-width: 900px)');
      let dockUserToggled = false;
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');

      function storeTheme(theme) {
        try {
          window.localStorage.setItem(storageKey, theme);
        } catch (err) {
          /* noop */
        }
      }

      function getStoredTheme() {
        try {
          return window.localStorage.getItem(storageKey);
        } catch (err) {
          return null;
        }
      }

      function applyTheme(theme, persist = true) {
        const value = theme === 'dark' ? 'dark' : 'light';
        docEl.dataset.theme = value;
        docEl.style.colorScheme = value;
        if (persist) {
          storeTheme(value);
        }
        reflectTheme(value);
      }

      function reflectTheme(theme) {
        if (!toggle) return;
        const isDark = theme === 'dark';
        toggle.setAttribute('aria-pressed', isDark);
        toggle.querySelector('.theme-toggle__icon').textContent = isDark ? 'üåû' : 'üåô';
        toggle.querySelector('.theme-toggle__label').textContent = isDark ? '–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞' : '–¢—ë–º–Ω–∞—è —Ç–µ–º–∞';
        toggle.title = isDark ? '–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ —Å–≤–µ—Ç–ª—É—é —Ç–µ–º—É' : '–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ —Ç—ë–º–Ω—É—é —Ç–µ–º—É';
      }

      applyTheme(getStoredTheme() || docEl.dataset.theme || (prefersDark.matches ? 'dark' : 'light'), false);

      if (toggle) {
        toggle.addEventListener('click', () => {
          const next = docEl.dataset.theme === 'dark' ? 'light' : 'dark';
          applyTheme(next);
        });
      }

      if (prefersDark && typeof prefersDark.addEventListener === 'function') {
        prefersDark.addEventListener('change', (event) => {
          if (!getStoredTheme()) {
            applyTheme(event.matches ? 'dark' : 'light', false);
          }
        });
      }

      function setDockHidden(hidden) {
        if (!dock) return;
        dock.dataset.dockHidden = hidden ? 'true' : 'false';
        if (dockToggle) {
          dockToggle.setAttribute('aria-pressed', hidden ? 'false' : 'true');
          dockToggle.setAttribute('aria-label', hidden ? '–ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é' : '–°–∫—Ä—ã—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é');
        }
      }

      function syncDock() {
        if (!dock || dockUserToggled) return;
        setDockHidden(dockMedia.matches);
      }

      if (dockToggle) {
        dockToggle.addEventListener('click', () => {
          if (!dock) return;
          dockUserToggled = true;
          const isHidden = dock.dataset.dockHidden === 'true';
          setDockHidden(!isHidden);
        });
      }

      if (dockMedia && typeof dockMedia.addEventListener === 'function') {
        dockMedia.addEventListener('change', syncDock);
      } else if (dockMedia && typeof dockMedia.addListener === 'function') {
        dockMedia.addListener(syncDock);
      }

      syncDock();
        }
      });
    })();
  </script>
  
</body>
</html>