# Страница «Слоты» — руководство по UI

Обновлённый экран /slots придерживается продуктового стандарта Smart Service: минимальная визуальная нагрузка, быстрая смена вида
 и строгая сетка 12×. Макеты собраны в Figma-файле «Slots Redesign» (страницы `/wireframe`, `/visual`, `/handoff`) и разложены на автолэйауты, чтобы разработчики смогли копировать размеры без ручных измерений.

## Каркас и сетка
- Контейнер: 1200–1280 px, max-width 1280 px, поля по 40 px, колонки — по 72 px с промежутками 24 px.
- Header фиксирует название раздела слева и KPI-панель справа: «Всего», «Свободно», «Занято». Значения связываются с `/api/slots/metrics` и обновляются вместе с фильтрами.
- Управляющая панель (filters-bar) идёт одной строкой: поиск, селект города, селект даты, мульти-статус, селект рекрутера, тип слота, переключатель вида (таблица/карточки), кнопка «Сбросить» и «Создать слот». Все элементы align-middle, шаг между контролами — 16 px.
- Основной блок — таблица на 6 колонок. Внизу — пагинация, показывающая диапазон `«21–40 из 128»` + селект «на страницу».
- Второй вариант представления — карточная сетка (auto layout в 3 колонки на ≥1280 px, 2 колонки на 960–1279 px, 1 колонка на мобильном).

## Логика фильтров и состояния URL
| Контрол | Поведение | URL-параметр |
| --- | --- | --- |
| Поиск | Токенизированный ввод (по Enter). Подсвечиваются совпадения в таблице/карточках. | `search` — повторяющийся параметр, до 6 токенов |
| Город | Выпадающий список, ищет по названию, в подсказке — количество слотов. | `city_id` (числовой) |
| Дата | Date-picker с выбором периода «Сегодня / Завтра / Неделя» + кастомный диапазон. | `date_from`, `date_to` |
| Статус | Мультиселект, использует цветные бейджи (Free=green, Booked=blue, Cancelled=red). | `status` — массив |
| Рекрутер | Async-select по `/api/recruiters?search=`. | `recruiter_id` |
| Тип слота | Chips: interview, intro_day, tech_screen, offboarding. | `purpose` |
| Переключатель вида | Таблица ⇄ карточки, сохраняется в localStorage и в URL. | `view=table|cards` |
| Только свободные | Чекбокс в тулбаре. | `free_only=1` |
| На страницу | Select (20/50/100/200/500). | `per_page` |

Каждое изменение фильтра сбрасывает `page` на 1 и обновляет KPI. Контролы синхронизированы с URL: прямой заход по ссылке открывает страницу в нужной конфигурации.

## Табличный вид
- Колонки: «Слот», «Кандидат», «Рекрутер», «Дата/время», «Статус», «Действия».
- Высота строки — 56 px, отступы: 16 px по бокам, 12 px между строками.
- Ховер-эффект — подсветка строки `bg-glass/40`, фокус — outline `outline-glass-strong` (токен `--focus-strong`).
- Клики по строке открывают Drawer с подробностями. Кнопка «Забронировать» в колонке «Действия» активна только для статуса Free.
- Пагинация: кнопки `<`, `1`, `2`, `…`, `>` и комбобокс «на страницу». Текущая страница подсвечена акцентом `primary/solid`.

## Карточный вид
- Карточка = стек слотов (до 3 записей одного дня) с вертикальными табами.
- Верх: бейдж статуса + дата, под ним — блок кандидата и рекрутера, CTA «Забронировать»/«Освободить».
- Лэйаут использует токены Liquid Glass: фон `glass/20`, бордер `glass/40`, тени `lg-shadow`. В тёмной теме фон заменяется на `glass-dark/24`.
- Карточки поддерживают быстрые действия: hover — `scale(1.01)` с плавностью 120 ms (в reduced-motion — без масштабирования, только бордер).

## Пустые, загрузочные и ошибочные состояния
- Loading: скелетон на 5 строк и placeholder карточки.
- Empty: иллюстрация + текст «Нет подходящих слотов» и CTA «Создать слот».
- Error: красный бейдж с текстом ошибки + кнопка «Повторить».

## Адаптивность
- ≥1280 px: 3 карточки в ряд, таблица показывает все колонки.
- 960–1279 px: карточки в 2 колонки, таблица сворачивает «Рекрутера» и «Действия» в popover.
- ≤959 px: карточки в одну колонку, таблица заменяется списком карточек.

## Доступность
- Контраст текста и активных элементов ≥ 4.5:1 (проверено через Figma Contrast plugin и axe).
- Управление с клавиатуры: таб-цикл — фильтры → таблица → пагинация → карточный переключатель.
- ARIA-атрибуты: `aria-sort` для колонок, `aria-live=polite` для обновления результатов, `aria-pressed` для переключателя вида, `aria-controls` у KPI.
- Для `prefers-reduced-motion` отключаем анимации scale/blur и заменяем их на тонкий бордер.

## Файлы поставки
- Figma: https://www.figma.com/file/placeholder/Slots-Redesign (страницы `/wireframe`, `/visual`, `/handoff`).
- Превью доступно на главном фрейме Figma (см. страницу `/visual`).
- Axe отчёт: `frontend/docs/slots-axe-report.txt`.

