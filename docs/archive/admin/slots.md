# Страница «Слоты»

Новый интерфейс страницы построен вокруг табличного вида в стиле Notion. Все основные действия и фильтры доступны прямо из таблицы, а подробная работа с кандидатом вынесена в модальное окно.

## Быстрый обзор

- **Sticky‑таблица.** Заголовки остаются на месте при скролле и содержат кнопки быстрого перехода к соответствующим фильтрам.
- **Статусы** рассчитываются на сервере и отображаются в виде бэйджей: `Free`, `Booked`, `Cancelled`, `Expired`.
- **Фильтры**:
  - верхняя панель с полями «Город», «Дата», «Рекрутер», «Статус», «Поиск»;
  - выбранные значения отображаются чипами с быстрым сбросом;
  - inline‑кнопки в заголовках таблицы фокусируют связанные поля фильтра.
- **Модалка «Подробнее»** открывается из последнего столбца, подгружает данные слота через `/api/slots/{id}` и позволяет редактировать информацию о кандидате.

## API

| Метод | Маршрут | Описание |
| --- | --- | --- |
| `GET` | `/api/slots` | Список слотов. Поддерживает фильтры `city_id`, `recruiter_id`, `status[]`, `date_from`, `date_to`, `search`. |
| `GET` | `/api/slots/{id}` | Детальные данные слота для модального окна. |
| `PATCH` | `/api/slots/{id}/candidate` | Создание/обновление данных кандидата (`full_name`, `phone`, `email`, `notes`, `booking_confirmed`). |
| `POST` | `/api/slots/{id}/cancel` | Помечает слот отменённым. |
| `POST` | `/api/slots/{id}/restore` | Снимает отмену, возвращая слот в рабочий статус. |

Все эндпоинты возвращают JSON с сериализованным слотом, который повторяет схему из UI (см. `serialize_slot`).

## A11y и UX

- таблица объявлена как `role="grid"`, кнопки фильтров и действий имеют подписи и доступность с клавиатуры;
- модальное окно содержит фокус‑ловушку, закрывается по `Esc` и возвращает фокус на элемент‑триггер;
- состояния загрузки/ошибок озвучиваются через `aria-live` тост.

## Запуск e2e

```bash
npm run test:e2e
```

В Playwright добавлены сценарии `slots.*.spec.ts` для регрессии визуальных состояний, доступности и CRUD операций. Перед запуском убедитесь, что backend поднят и отдает новые эндпоинты.
