# Liquid Glass Design System

## Токены

| Группа | Токен | Значение / Примечание |
| --- | --- | --- |
| Фон | `--bg-base` | Цвет подложки страницы, используется для градиентного фона body. |
| Фон | `--glass-surface-1..3` | Пресеты стеклянных слоёв для карточек, таблиц и вспомогательных панелей. |
| Текст | `--fg-primary`, `--fg-secondary-alpha`, `--fg-muted-alpha` | Определяют контраст заголовков, подзаголовков и служебного текста. |
| Акценты | `--accent`, `--accent-soft`, `--accent-strong` | Градиенты для primary-кнопок и фокусных состояний. |
| Границы | `--border`, `--border-alpha`, `--glass-divider-color` | Системные разделители и бордеры стеклянных поверхностей. |
| Тени | `--shadow-soft`, `--shadow-strong`, `--shadow-focus`, `--shadow-inset` | Наружные и внутренние тени, используемые в карточках и фокусах. |
| Радиусы | `--radius-xs`, `--radius`, `--radius-lg`, `--radius-xl` | Контроль округлений для капсул, карточек и модалок. |
| Blur | `--blur`, `--blur-mobile` | Значения backdrop-filter для десктопа и мобильных. |
| Шрифты | `--font-sans` | Базовый стек шрифта (SF Pro, Inter, системные). |

## Tailwind интеграция

* Цвета подключены как `rgb(var(--token) / …)` в `tailwind.config.js`, что позволяет использовать синтаксис `text-fg-secondary` и комбинировать с `/opacity`.
* `boxShadow.glass`, `boxShadow.focus-ring` и `backdropBlur.glass` завязаны на токены теней и blur.
* Радиусы (`borderRadius`) читают `--radius`, `--radius-lg`, `--radius-xl`, гарантируя плавность капсул и модалок.

## Утилиты Liquid Glass

Классы определены в `static/css/tokens.css` и Tailwind-компонентах:

* `.glass` — базовый стеклянный слой с blur, тенью и шумом.
* `.glass-border` — добавляет градиентный бордер-блик для карточек.
* `.glass-noise` — накладывает процедурный шум, чтобы «стекло» не выглядело плоским.
* `.glass-divider` — тонкий разделитель для панелей и списков.

## Паттерны

### Навигация
* Sticky topbar с `backdrop-filter` и стеклянным градиентом.
* Компактный сайдбар/мобильное меню с активным штрихом под ссылкой.

### Карточки и сетки
* `glass-card` и `surface` используют `glass`-слой, мягкий highlight и шум.
* Адаптивная сетка дашборда `dashboard-metrics` перестраивается на 2/4 колонки.

### Таблицы
* `list-table-wrapper` получает фон `--glass-surface-2`, липкую шапку и зебру `--glass-surface-3`.
* Сортировка по клику реализована через JS-хуки (`.sort` кнопки) и стили стрелок.

### Формы
* Поля на базе `@tailwindcss/forms` + кастомный focus-радиус (градиент по `--shadow-focus`).
* Секции форм (`form-shell__section`) используют стеклянный слой и внутренние подсекции.

### Кнопки
* Primary — градиент `accent → accent-soft`, внутренняя подсветка.
* Soft/Ghost — стеклянные капсулы (`rgb(var(--border) / …)`) с hover-переходами.

### Модалки/тосты
* Анимации `glass-in` на 180–220 мс `cubic-bezier(0.16, 1, 0.3, 1)`.
* Подложка `.modal-backdrop` + стеклянный контент с шумом и бликом.

### Тёмная тема и A11y
* Все токены переопределяются через `[data-theme="dark"]` — контраст ≥ WCAG AA.
* Видимые focus-обводки (`box-shadow: 0 0 0 3px rgb(var(--shadow-focus))`).
* Ограничение blur на мобилках (`--blur-mobile = 9px`).
* Компоненты проверены на навигацию с клавиатуры и скринридерные лейблы.

## Рекомендации по расширению

1. Для новых виджетов используйте токены, не жёсткие hex-значения.
2. Критичный CSS (фоновые градиенты) размещайте в `<head>` либо в preload.
3. Иконки/изображения подгружайте лениво, чтобы сохранить производительность стеклянных слоёв.
