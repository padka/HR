{% macro toolbar_action(action) %}
  {% set variant = action.variant|default('ghost') %}
  {% set type = action.type|default('link') %}
  {% set label = action.label|default('') %}
  {% set href = action.href|default('#') %}
  {% set button_type = action.button_type|default('button') %}
  {% set attrs = action.attrs|default('') %}
  {% set icon = action.icon %}
  {% set disabled = action.disabled|default(false) %}
  {% if type == 'button' %}
    <button type="{{ button_type }}" class="btn btn--{{ variant }}" {{ attrs|safe }}{% if disabled %} disabled{% endif %}>
      {% if icon %}<span class="btn__icon">{{ icon|safe }}</span>{% endif %}
      {{ label }}
    </button>
  {% else %}
    <a href="{{ href }}" class="btn btn--{{ variant }}" {{ attrs|safe }}{% if disabled %} aria-disabled="true"{% endif %}>
      {% if icon %}<span class="btn__icon">{{ icon|safe }}</span>{% endif %}
      {{ label }}
    </a>
  {% endif %}
{% endmacro %}

{% macro toolbar_chip(chip) %}
  {% set tone = chip.tone|default('info') %}
  {% set label = chip.label|default('') %}
  {% set value = chip.value %}
  {% set icon = chip.icon %}
  {% set attrs = chip.attrs|default('') %}
  {% set value_id = chip.value_id %}
  <span class="chip chip--{{ tone }}" {{ attrs|safe }}>
    {% if icon %}<span class="chip__icon">{{ icon|safe }}</span>{% endif %}
    <span class="chip__label">{{ label }}</span>
    {% if value is not none %}<span class="chip__value"{% if value_id %} id="{{ value_id }}"{% endif %}>{{ value }}</span>{% endif %}
  </span>
{% endmacro %}

{% macro list_toolbar(form_id=None, form_action='#', method='get', actions=None, chips=None, mass_actions=None, sticky=False, form_attrs='') %}
  {% set actions = actions or [] %}
  {% set chips = chips or [] %}
  {% set mass_actions = mass_actions or [] %}
  <section class="list-toolbar{% if sticky %} list-toolbar--sticky{% endif %}">
    <form{% if form_id %} id="{{ form_id }}"{% endif %} class="list-toolbar__form" action="{{ form_action }}" method="{{ method }}" {{ form_attrs|safe }}>
      <div class="list-toolbar__filters">
        {{ caller() }}
      </div>
      {% if mass_actions %}
        <div class="list-toolbar__mass">
          {% for action in mass_actions %}
            {{ toolbar_action(action) }}
          {% endfor %}
        </div>
      {% endif %}
      {% if actions %}
        <div class="list-toolbar__actions">
          {% for action in actions %}
            {{ toolbar_action(action) }}
          {% endfor %}
        </div>
      {% endif %}
    </form>
    {% if chips %}
      <div class="list-toolbar__chips">
        {% for chip in chips %}
          {{ toolbar_chip(chip) }}
        {% endfor %}
      </div>
    {% endif %}
  </section>
{% endmacro %}
